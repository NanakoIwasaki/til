# 2025-08-11 学習記録

## 学習内容
- Rails基礎　パスワードリセット機能の実装

## 学んだこと
- マイグレーションファイルの修正方法

## つまずいたポイント・解決方法
- **問題**:
Rails/UniqueValidationWithoutIndex: Uniqueness validation should have a unique index on the database column.
<br>自動レビューを行った際にマイグレーションファイルに対してエラー発生
- **解決策**:
①マイグレーションのコード自体には問題がなさそうだったため、マイグレーションが正常に実行されているか確認<br>docker compose exec web rails db:migrate:status<br>
②スキーマの確認<br>'cat db/schema.rb'<br>（ここでスキーマ上でユニーク制約が表示されていないことが判明）<br>
③マイグレーションのロールバックを実行 'docker compose exec web rails db:rollback'<br>
④その後再度マイグレーションを実行　'docker compose exec web rails db:migrate'<br>
⑤再度スキーマを確認して反映されてることを確認して完了
- **学び**:
一度実行されたマイグレーションファイルは「実行済み」として記録される<br>
同じファイルを編集しても、再度migrateしても反映されない<br>
修正したい場合は、まずロールバックで「未実行」状態に戻す<br>
その後、ファイルを修正してから再実行する<br>
## 明日の学習予定
- カリキュラム進める

## 感想
マイグレーションファイルを修正後、再度実行したら更新されると思いきやそんなことはないという話でした。<br>
最新の実行を無かったことにする'ロールバック'の方法で今回はエラーを解消しましたが、本来はマイグレーションファイルを新しく作ってそこで修正を行うのが一番良いようです。ファイルは増えますが。<br>
⭐️ポイント⭐️<br>
マイグレーションファイル＝データベースへの指示書<br>
schema.rb(スキーマ)＝現在のデータベースの状態を表す結果
